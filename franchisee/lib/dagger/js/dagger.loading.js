!function(e,t){!function(){"use strict";angular.module("dagger-loading-bar",["dagger.loadingBarInterceptor"]),angular.module("cfpLoadingBarProvider",["dagger.loadingBarInterceptor"]),angular.module("dagger.loadingBarInterceptor",["dagger.loadingBar"]).config(["$httpProvider",function(e){var t=["$q","$cacheFactory","$timeout","$rootScope","$log","$daggerLoadingBar",function(t,a,n,r,i,o){function c(){n.cancel(d),o.complete(),g=0,l=0}function s(t){var n,r=a.get("$http"),i=e.defaults;!t.cache&&!i.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(n=angular.isObject(t.cache)?t.cache:angular.isObject(i.cache)?i.cache:r);var o=void 0!==n&&void 0!==n.get(t.url);return void 0!==t.cached&&o!==t.cached?t.cached:(t.cached=o,o)}var d,l=0,g=0,u=o.latencyThreshold;return{request:function(e){return e.ignoreLoadingBar||s(e)||(r.$broadcast("$daggerLoadingBar:loading",{url:e.url}),0===l&&(d=n(function(){o.start()},u)),l++,o.set(g/l)),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||s(e.config)||(g++,r.$broadcast("$daggerLoadingBar:loaded",{url:e.config.url,result:e}),g>=l?c():o.set(g/l)),e):(i.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||s(e.config)||(g++,r.$broadcast("$daggerLoadingBar:loaded",{url:e.config.url,result:e}),g>=l?c():o.set(g/l)),t.reject(e)):(i.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t.reject(e))}}}];e.interceptors.push(t)}]),angular.module("dagger.loadingBar",[]).provider("$daggerLoadingBar",function(){var e=this;this.loadingText="加载中",this.includeSpinner=!0,this.includeBar=!1,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div class="dagger-loading-content"><svg id="dagger-loading" viewBox="0 0 44 44" version="1.1"><g id="dagger-loading-pane" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">   <g id="loading-circle" stroke-width="3">       <circle id="circle-back-face" stroke="#5B5B5C" cx="22" cy="22" r="20" stroke-linecap="round"></circle>       <circle id="circle-front-face" stroke="#188BF9" cx="22" cy="22" r="20" stroke-linecap="round"></circle>   </g>   <g id="result-success" transform="translate(2, 3)" stroke="#188BF9" stroke-width="3">       <path d="M7.43725586,19.375 L15.6247559,27.625 L31.9372559,11.4375" stroke-linecap="round"></path>   </g>   <g id="result-failure" transform="translate(2, 3)" stroke="#FC4B4C" stroke-width="3">       <path stroke-linecap="round" d="M10.125,10.09375 L29.9375,29.78125"></path>       <path stroke-linecap="round" d="M10.125,10.09375 L29.9375,29.78125" transform="translate(20.031250, 19.937500) scale(-1, 1) translate(-20.031250, -19.937500) "></path>   </g></g></svg><div class="status-group"><p class="status-1"></p><p class="status-2"></p></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(t,a,n,r){function i(i){h||(h=t.get("$animate")),i=i||e.loadingText,$.find(".status-group p.status-1").text(i);var c=a.find(m).eq(0);n.cancel(f),b||(r.$broadcast("$daggerLoadingBar:started"),b=!0,S&&h.enter(v,c,angular.element(c[0].lastChild)),L&&h.enter($,c,angular.element(c[0].lastChild)),o(C))}function o(e){if(b){var t=100*e+"%";B.css("width",t),k=e,n.cancel(p),p=n(function(){c()},250)}}function c(){if(!(s()>=1)){var e=0,t=s();e=t>=0&&t<.25?(3*Math.random()+3)/100:t>=.25&&t<.65?3*Math.random()/100:t>=.65&&t<.9?2*Math.random()/100:t>=.9&&t<.99?.005:0;var a=s()+e;o(a)}}function s(){return k}function d(){k=0,b=!1}function l(){h||(h=t.get("$animate")),r.$broadcast("$daggerLoadingBar:completed"),o(1),n.cancel(f),f=n(function(){var e=h.leave(v,d);e&&e.then&&e.then(d),h.leave($).then(function(){$.find(".status-group").removeClass("complete"),$.find("#dagger-loading").removeClass("success"),$.find("#dagger-loading").removeClass("failure")})},200)}function g(e){h||(h=t.get("$animate")),e=e||"成功",$.find(".status-group p.status-2").text(e),h.addClass($.find(".status-group"),"complete"),h.addClass($.find("#dagger-loading"),"success").then(function(){n.cancel(f),f=n(function(){l()},1e3)})}function u(e){h||(h=t.get("$animate")),e=e||"失败",$.find(".status-group p.status-2").text(e),h.addClass($.find(".status-group"),"complete"),h.addClass($.find("#dagger-loading"),"failure").then(function(){n.cancel(f),f=n(function(){l()},1e3)})}var h,p,f,m=this.parentSelector,v=angular.element(this.loadingBarTemplate),B=v.find("div").eq(0),$=angular.element(this.spinnerTemplate),b=!1,k=0,L=this.includeSpinner,S=this.includeBar,C=this.startSize;return{text:this.loadingText,start:i,set:o,status:s,inc:c,complete:l,success:g,failure:u,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),t[""]=e}({},function(){return this}());